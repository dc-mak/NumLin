% generated by Ott 0.25 from: semantics.ott
\documentclass[11pt]{article}%
\usepackage{amsmath,amssymb}%
\usepackage{supertabular}%
\usepackage{geometry}%
\usepackage{ifthen}%
\usepackage{alltt}%hack%
\geometry{a4paper,dvips,twoside,left=22.5mm,right=22.5mm,top=20mm,bottom=30mm}%
\usepackage{color}%

\input{semantics_def}%

\newcommand{\den}[2]{ \mathcal{#1} [\![ #2 ]\!] }%
\newcommand{\V}[1]{ \den{V}{#1} }%
\newcommand{\C}[1]{ \den{C}{#1} }%
 
\newcommand{\Unit}{\ottkw{unit}}%
\newcommand{\Bang}{\ottkw{!}}
\newcommand{\Bool}{\ottkw{bool}}%
\newcommand{\Int}{\ottkw{int}}%
\newcommand{\Elt}{\ottkw{elt}}%
\newcommand{\Mat}{\ottkw{mat}}%
\newcommand{\Zf}{\ottkw{Z}}%
\newcommand{\Sf}{\ottkw{S}}%
\newcommand{\Many}{\ottkw{Many}}%
\newcommand{\dom}{\mathrm{dom}}%

\newcommand{\empH}{\{\}}%
\newcommand{\funEOne}{\ottkw{fun} \, \mathit{x}  \ottsym{:}  \ottnt{t}  \rightarrow  \ottnt{e_{{\mathrm{1}}}}}%
\newcommand{\eOneEq}{\ottnt{e_{{\mathrm{1}}}}  \ottsym{=}  \ottnt{e}  \ottsym{[}  \mathit{g}  \ottsym{/}  \ottkw{let} \, \ottkw{Many} \, \mathit{g}  \ottsym{=}  \ottkw{fix} \, \ottsym{(}  \mathit{g}  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{t}  \ottsym{,}  \ottnt{e}  \ottsym{:}  \ottnt{t'}  \ottsym{)} \, \ottkw{in} \, \ottkw{fun} \, \mathit{x}  \ottsym{:}  \ottnt{t}  \rightarrow  \ottnt{e}  \ottsym{]}}%

\begin{document}%
\ottall%

\begin{align*}
  \V{ \Unit } &= \{ (\empH, \ast) \} \\
\\
    \V{ \Bang \Bool } &= \{ (\empH, true), (\empH, false) \} \\
\\
    \V{ \Bang \Int } &= \{ (\empH, n) \mid 2^{-63} \leq n \leq 2^{63} -1 \} \\
\\
    \V{ \Bang \Elt } &= \{ (\empH, f) \mid f \mathrm{ a IEEE Float64} \} \\
\\
    \V{ \Zf \, \Mat } &= \{ (\{ l \mapsto_{m_W} \_ \} , l) \} \\
\\
    \V{ (\Sf f) \Mat } &= \{ (\sigma , l) \mid l \in \dom(\sigma) \wedge \sigma \star \sigma \in \pi_1 [ \V{ f \ottkw{mat} } ] \} \\
\\
    \V{ \Bang (t' \multimap t'') } &= \{ (\empH, \Many\, v) \mid (\empH, v) \in \V{ t' \multimap t'' } \} \\
                                       & \cup \{ (\empH, \ottkw{fix} (g, x : t, e : t')) \mid \forall (\sigma', v') \in \V{ t' }.\ e [ x / v ] [ g / \funEOne ] \in \C{ t' } \} \\
                                       & \mathrm{where } \eOneEq  \\
\\
    \V{ \Bang t' } &= \{ (\empH, \Many\, v) \mid t \notin \{ \Bool, \Int, \Elt, t' \multimap t'' \} \wedge (\empH, v) \in \V{ t' } \} \\
\\
    \V{ \forall fc.\  t } &= \{ (\sigma, \forall fc.\ v) \mid \forall f.\ (\sigma, v [ fc / f ]) \in \V{ t [ fc / f ] } \} \\
\\
    \V{ t' \otimes t'' } &= \{ (\sigma, \langle v', v'' \rangle) \mid \exists \sigma', \sigma'' .\ (\sigma', v') \in \V{ t } \wedge (\sigma'', v'') \in \V{ t''} \wedge \sigma = \sigma' \star \sigma'' \} \\
\\
    \V{ t' \multimap t'' } &= \{ (\sigma, \ottkw{fun}\, x : t' \rightarrow e'') \mid \forall (\sigma', v') \in \V{ t' }.\ \sigma = \sigma' \star \sigma'' \mathrm{ defined } \Rightarrow (\sigma' \star \sigma'', e'' [ x / v' ]) \in \C{ t'' } \} \\
\\
    \C{ t } &= \{ (\sigma_s, e) \mid \forall \sigma_r.\ \sigma_s \star \sigma_r \mathrm{ defined } \Rightarrow \exists \sigma_f, v, . (\sigma_s \star \sigma_r, e) \rightarrow^n (\sigma_f \star \sigma_r, v) \in \V{ t } \} \\
\\
    \den{S}{ \Delta ; \cdot } \theta &= \{ (\empH, \delta) \mid \dom(\Delta) = (\delta) \wedge \forall x \in \dom(\Delta).\ (\empH, \delta(x)) \in \V{ \theta(t) } \} \\
\\
    \den{S}{ \Delta ; \Gamma , x : t } \theta &= \{ (\sigma \uplus \sigma_x, \delta[x \mapsto v_x ]) \mid (\sigma, \delta) \in \den{S}{ \Delta; \Gamma } \wedge (\sigma_x, v_x) \in \V{ \theta(t) } \} \\
\\
    \den{}{ \Theta; \Delta ; \Gamma \vdash e : t } &= \forall \theta, \delta, \sigma.\ \dom(\Theta) = \dom(\theta) \wedge (\sigma, \delta) \in  \den{S}{ \Delta; \Gamma }\theta \Rightarrow \sigma(\delta(e)) \in \C{ \theta(t) }
\end{align*}

\end{document}
