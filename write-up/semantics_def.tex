% generated by Ott 0.25 from: semantics.ott
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \mathit{fraccap} ,\, \mathit{fc} $ & \ottcom{fractional capability variable} \\
 $ \mathit{expression} ,\, \mathit{x} ,\, \mathit{g} ,\, \mathit{a} ,\, \mathit{b} $ & \ottcom{expression variable} \\
 $ \mathit{integer} ,\, \mathit{k} $ & \ottcom{integer variable} \\
 $ \mathit{float64} ,\, \mathit{flt} $ & \ottcom{64-bit floating-point variable} \\
}}

\newcommand{\ottterminals}{
\ottrulehead{\ottnt{terminals}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \lambda }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \otimes }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \multimap }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vdash }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \in }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \forall }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \textsf{Cap} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \textsf{Type} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \: ! }{}{}{}{}}

\newcommand{\ottf}{
\ottrulehead{\ottnt{f}}{::=}{\ottcom{fractional capability}}\ottprodnewline
\ottfirstprodline{|}{\mathit{fc}}{}{}{}{\ottcom{variable}}\ottprodnewline
\ottprodline{|}{\ottkw{Zero}}{}{}{}{\ottcom{zero}}\ottprodnewline
\ottprodline{|}{\ottkw{Succ} \, \ottnt{f}}{}{}{}{\ottcom{successor}}}

\newcommand{\ottti}{
\ottrulehead{\ottnt{ti}}{::=}{\ottcom{non-linear type}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{int}}{}{}{}{\ottcom{integer}}\ottprodnewline
\ottprodline{|}{\ottnt{f_{{\mathrm{64}}}}}{}{}{}{\ottcom{64-bit floats (doubles)}}\ottprodnewline
\ottprodline{|}{\ottkw{bool}}{}{}{}{\ottcom{booleans}}\ottprodnewline
\ottprodline{|}{\ottnt{t}  \multimap  \ottnt{t'}}{}{}{}{\ottcom{arrow (multiple-use)}}}

\newcommand{\ottt}{
\ottrulehead{\ottnt{t}}{::=}{\ottcom{linear type}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{1}}{}{}{}{\ottcom{unit}}\ottprodnewline
\ottprodline{|}{\: !  \ottsym{(}  \ottnt{ti}  \ottsym{)}}{}{}{}{\ottcom{multiple-use type}}\ottprodnewline
\ottprodline{|}{\ottnt{t}  \otimes  \ottnt{t'}}{}{}{}{\ottcom{pair}}\ottprodnewline
\ottprodline{|}{\ottnt{t}  \multimap  \ottnt{t'}}{}{}{}{\ottcom{arrow (single-use)}}\ottprodnewline
\ottprodline{|}{\forall \, \mathit{fc}  \ottsym{.}  \ottnt{t}}{}{\textsf{bind}\; \mathit{fc}\; \textsf{in}\; \ottnt{t}}{}{\ottcom{frac. cap. abstraction}}\ottprodnewline
\ottprodline{|}{\ottkw{Arr} \, \ottsym{[}  \ottnt{f}  \ottsym{]}}{}{}{}{\ottcom{array}}\ottprodnewline
\ottprodline{|}{\ottnt{t}  \ottsym{\{}  \ottnt{f}  \ottsym{/}  \mathit{fc}  \ottsym{\}}} {\textsf{M}}{}{}{\ottcom{substitution}}}

\newcommand{\ottp}{
\ottrulehead{\ottnt{p}}{::=}{\ottcom{primitive}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{set}}{}{}{}{\ottcom{array index assignment}}\ottprodnewline
\ottprodline{|}{\ottkw{get}}{}{}{}{\ottcom{array indexing}}\ottprodnewline
\ottprodline{|}{\ottkw{add}}{}{}{}{\ottcom{64-bit float addition}}\ottprodnewline
\ottprodline{|}{\ottkw{sub}}{}{}{}{\ottcom{64-bit float subtraction}}\ottprodnewline
\ottprodline{|}{\ottkw{mul}}{}{}{}{\ottcom{64-bit float multiplication}}\ottprodnewline
\ottprodline{|}{\ottkw{div}}{}{}{}{\ottcom{64-bit float division}}\ottprodnewline
\ottprodline{|}{\ottkw{eq}}{}{}{}{\ottcom{64-bit float equality}}\ottprodnewline
\ottprodline{|}{\ottkw{lt}}{}{}{}{\ottcom{64-bit float less-than}}\ottprodnewline
\ottprodline{|}{\ottkw{iadd}}{}{}{}{\ottcom{integer addition}}\ottprodnewline
\ottprodline{|}{\ottkw{isub}}{}{}{}{\ottcom{integer subtraction}}\ottprodnewline
\ottprodline{|}{\ottkw{imul}}{}{}{}{\ottcom{integer multiplication}}\ottprodnewline
\ottprodline{|}{\ottkw{idiv}}{}{}{}{\ottcom{integer division}}\ottprodnewline
\ottprodline{|}{\ottkw{ieq}}{}{}{}{\ottcom{integer equality}}\ottprodnewline
\ottprodline{|}{\ottkw{ilt}}{}{}{}{\ottcom{integer comparsion (less-than)}}\ottprodnewline
\ottprodline{|}{\ottkw{and}}{}{}{}{\ottcom{boolean conjuction}}\ottprodnewline
\ottprodline{|}{\ottkw{or}}{}{}{}{\ottcom{boolean disjunction}}\ottprodnewline
\ottprodline{|}{\ottkw{not}}{}{}{}{\ottcom{boolean negation}}\ottprodnewline
\ottprodline{|}{ \textbf{split\_perm} }{}{}{}{\ottcom{share array}}\ottprodnewline
\ottprodline{|}{ \textbf{merge\_perm} }{}{}{}{\ottcom{unshare array}}\ottprodnewline
\ottprodline{|}{\ottkw{free}}{}{}{}{\ottcom{free arrary}}\ottprodnewline
\ottprodline{|}{\ottkw{copy}}{}{}{}{\ottcom{copy array}}\ottprodnewline
\ottprodline{|}{\ottkw{swap}}{}{}{}{\ottcom{swap array}}\ottprodnewline
\ottprodline{|}{\ottkw{asum}}{}{}{}{\ottcom{$\sum_i | x_i |$}}\ottprodnewline
\ottprodline{|}{\ottkw{axpy}}{}{}{}{\ottcom{$x := \alpha x + y$}}\ottprodnewline
\ottprodline{|}{\ottkw{dot}}{}{}{}{\ottcom{$x \cdot y$}}\ottprodnewline
\ottprodline{|}{ \textbf{nrm2} }{}{}{}{\ottcom{$\| x \| ^ 2$}}\ottprodnewline
\ottprodline{|}{\ottkw{rot}}{}{}{}{\ottcom{plane rotation}}\ottprodnewline
\ottprodline{|}{\ottkw{rotg}}{}{}{}{\ottcom{Givens rotation}}\ottprodnewline
\ottprodline{|}{\ottkw{rotm}}{}{}{}{\ottcom{modified givens rotation}}\ottprodnewline
\ottprodline{|}{\ottkw{rotmg}}{}{}{}{\ottcom{generate modified Givens rotation}}\ottprodnewline
\ottprodline{|}{\ottkw{scal}}{}{}{}{\ottcom{$x := \alpha x$}}\ottprodnewline
\ottprodline{|}{\ottkw{amax}}{}{}{}{\ottcom{index of maximum absolute value}}}

\newcommand{\otte}{
\ottrulehead{\ottnt{e}}{::=}{\ottcom{expression}}\ottprodnewline
\ottfirstprodline{|}{\mathit{x}}{}{}{}{\ottcom{variable}}\ottprodnewline
\ottprodline{|}{\mathit{k}}{}{}{}{\ottcom{integer}}\ottprodnewline
\ottprodline{|}{\mathit{flt}}{}{}{}{\ottcom{64-bit floating-point}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottsym{)}}{}{}{}{\ottcom{unit introduction}}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, \ottsym{(}  \ottsym{)}  \ottsym{=}  \ottnt{e}  \ottsym{;}  \ottnt{e'}}{}{}{}{\ottcom{unit elimination}}\ottprodnewline
\ottprodline{|}{\ottkw{true}}{}{}{}{\ottcom{true (boolean introduction)}}\ottprodnewline
\ottprodline{|}{\ottkw{false}}{}{}{}{\ottcom{false (boolean introduction)}}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, \ottnt{e} \, \ottkw{then} \, \ottnt{e_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{e_{{\mathrm{2}}}}}{}{}{}{\ottcom{if (boolean elimination)}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{e}  \ottsym{,}  \ottnt{e'}  \ottsym{)}}{}{}{}{\ottcom{pair introduction}}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, \ottsym{(}  \mathit{a}  \ottsym{,}  \mathit{b}  \ottsym{)}  \ottsym{=}  \ottnt{e}  \ottsym{;}  \ottnt{e'}}{}{\textsf{bind}\; \mathit{a} \cup  \mathit{b}\; \textsf{in}\; \ottnt{e'}}{}{\ottcom{pair elimination}}\ottprodnewline
\ottprodline{|}{\lambda  \mathit{x}  \ottsym{:}  \ottnt{t}  \ottsym{.}  \ottnt{e}}{}{\textsf{bind}\; \mathit{x}\; \textsf{in}\; \ottnt{e}}{}{\ottcom{abstraction}}\ottprodnewline
\ottprodline{|}{\ottkw{fix} \, \mathit{g}  \ottsym{:}  \: !  \ottsym{(}  \ottnt{t}  \multimap  \ottnt{t'}  \ottsym{)}  \ottsym{=}  \ottnt{e}}{}{\textsf{bind}\; \mathit{g}\; \textsf{in}\; \ottnt{e}}{}{\ottcom{fixpoint operator}}\ottprodnewline
\ottprodline{|}{\ottnt{e} \, \ottnt{e'}}{}{}{}{\ottcom{application}}\ottprodnewline
\ottprodline{|}{\ottkw{Array} \, \ottnt{e}}{}{}{}{\ottcom{array introduction}}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, \mathit{x}  \ottsym{=}  \ottnt{e}  \ottsym{;}  \ottnt{e'}}{}{\textsf{bind}\; \mathit{x}\; \textsf{in}\; \ottnt{e'}}{}{\ottcom{array elimination}}\ottprodnewline
\ottprodline{|}{\ottnt{p}}{}{}{}{\ottcom{Level 1 BLAS routine primitives}}\ottprodnewline
\ottprodline{|}{\forall \, \mathit{fc}  \ottsym{.}  \ottnt{e}}{}{}{}{\ottcom{frac. cap. abstraction}}\ottprodnewline
\ottprodline{|}{\ottnt{e}  \ottsym{[}  \ottnt{f}  \ottsym{]}}{}{}{}{\ottcom{frac. cap. specialisation}}}

\newcommand{\ottT}{
\ottrulehead{\Theta}{::=}{\ottcom{fractional capability environment}}\ottprodnewline
\ottfirstprodline{|}{ \cdot }{}{}{}{}\ottprodnewline
\ottprodline{|}{\Theta  \ottsym{,}  \mathit{fc}}{}{}{}{}}

\newcommand{\ottG}{
\ottrulehead{\Gamma}{::=}{\ottcom{linear types environment}}\ottprodnewline
\ottfirstprodline{|}{ \cdot }{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{t}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{,}  \Gamma'}{}{}{}{}}

\newcommand{\ottD}{
\ottrulehead{\Delta}{::=}{\ottcom{linear types environment}}\ottprodnewline
\ottfirstprodline{|}{ \cdot }{}{}{}{}\ottprodnewline
\ottprodline{|}{\Delta  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{ti}}{}{}{}{}}

\newcommand{\ottformula}{
\ottrulehead{\ottnt{formula}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{judgement}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{x}  \ottsym{:}  \ottnt{ti} \, \in \, \Delta}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{x}  \ottsym{:}  \ottnt{t} \, \in \, \Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{fc} \, \in \, \Theta}{}{}{}{}}

\newcommand{\ottWellXXFormed}{
\ottrulehead{\ottnt{Well\_Formed}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Theta  \vdash  \ottnt{f} \, \textsf{Cap}}{}{}{}{\ottcom{Valid fractional capabilities}}\ottprodnewline
\ottprodline{|}{\Theta  \vdash  \ottnt{t} \, \textsf{Type}}{}{}{}{\ottcom{Valid types}}}

\newcommand{\ottTypes}{
\ottrulehead{\ottnt{Types}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t}}{}{}{}{\ottcom{Tying rules for expressions (no primitives yet)}}}

\newcommand{\ottjudgement}{
\ottrulehead{\ottnt{judgement}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{Well\_Formed}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Types}}{}{}{}{}}

\newcommand{\ottuserXXsyntax}{
\ottrulehead{\ottnt{user\_syntax}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathit{fraccap}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{expression}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{integer}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{float64}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{terminals}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{f}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{ti}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{t}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{p}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Theta}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Delta}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{formula}}{}{}{}{}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\ottterminals\ottinterrule
\ottf\ottinterrule
\ottti\ottinterrule
\ottt\ottinterrule
\ottp\ottinterrule
\otte\ottinterrule
\ottT\ottinterrule
\ottG\ottinterrule
\ottD\ottinterrule
\ottformula\ottinterrule
\ottWellXXFormed\ottinterrule
\ottTypes\ottinterrule
\ottjudgement\ottinterrule
\ottuserXXsyntax\ottafterlastrule
}}

% defnss
% defns Well_Formed
%% defn Cap_
\newcommand{\ottdruleWFXXCapXXVar}[1]{\ottdrule[#1]{%
\ottpremise{\mathit{fc} \, \in \, \Theta}%
}{
\Theta  \vdash  \mathit{fc} \, \textsf{Cap}}{%
{\ottdrulename{WF\_Cap\_Var}}{}%
}}


\newcommand{\ottdruleWFXXCapXXZero}[1]{\ottdrule[#1]{%
}{
\Theta  \vdash  \ottkw{Zero} \, \textsf{Cap}}{%
{\ottdrulename{WF\_Cap\_Zero}}{}%
}}


\newcommand{\ottdruleWFXXCapXXSucc}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash  \ottnt{f} \, \textsf{Cap}}%
}{
\Theta  \vdash  \ottkw{Succ} \, \ottnt{f} \, \textsf{Cap}}{%
{\ottdrulename{WF\_Cap\_Succ}}{}%
}}

\newcommand{\ottdefnWFXXCapXX}[1]{\begin{ottdefnblock}[#1]{$\Theta  \vdash  \ottnt{f} \, \textsf{Cap}$}{\ottcom{Valid fractional capabilities}}
\ottusedrule{\ottdruleWFXXCapXXVar{}}
\ottusedrule{\ottdruleWFXXCapXXZero{}}
\ottusedrule{\ottdruleWFXXCapXXSucc{}}
\end{ottdefnblock}}

%% defn Type_
\newcommand{\ottdruleWFXXTypeXXUnit}[1]{\ottdrule[#1]{%
}{
\Theta  \vdash  \ottsym{1} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Unit}}{}%
}}


\newcommand{\ottdruleWFXXTypeXXInt}[1]{\ottdrule[#1]{%
}{
\Theta  \vdash  \: !  \ottsym{(}  \ottkw{int}  \ottsym{)} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Int}}{}%
}}


\newcommand{\ottdruleWFXXTypeXXFloatSixFour}[1]{\ottdrule[#1]{%
}{
\Theta  \vdash  \: !  \ottsym{(}  \ottnt{f_{{\mathrm{64}}}}  \ottsym{)} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Float64}}{}%
}}


\newcommand{\ottdruleWFXXTypeXXBool}[1]{\ottdrule[#1]{%
}{
\Theta  \vdash  \: !  \ottsym{(}  \ottkw{bool}  \ottsym{)} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Bool}}{}%
}}


\newcommand{\ottdruleWFXXTypeXXPair}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash  \ottnt{t} \, \textsf{Type}}%
\ottpremise{\Theta  \vdash  \ottnt{t'} \, \textsf{Type}}%
}{
\Theta  \vdash  \ottnt{t}  \otimes  \ottnt{t'} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Pair}}{}%
}}


\newcommand{\ottdruleWFXXTypeXXLollipop}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash  \ottnt{t} \, \textsf{Type}}%
\ottpremise{\Theta  \vdash  \ottnt{t'} \, \textsf{Type}}%
}{
\Theta  \vdash  \ottnt{t}  \multimap  \ottnt{t'} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Lollipop}}{}%
}}


\newcommand{\ottdruleWFXXTypeXXFixt}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash  \ottnt{t}  \multimap  \ottnt{t'} \, \textsf{Type}}%
}{
\Theta  \vdash  \: !  \ottsym{(}  \ottnt{t}  \multimap  \ottnt{t'}  \ottsym{)} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Fixt}}{}%
}}


\newcommand{\ottdruleWFXXTypeXXArray}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash  \ottnt{f} \, \textsf{Cap}}%
}{
\Theta  \vdash  \ottkw{Arr} \, \ottsym{[}  \ottnt{f}  \ottsym{]} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Array}}{}%
}}


\newcommand{\ottdruleWFXXTypeXXForAll}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{,}  \mathit{fc}  \vdash  \ottnt{t} \, \textsf{Type}}%
}{
\Theta  \vdash  \forall \, \mathit{fc}  \ottsym{.}  \ottnt{t} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_ForAll}}{}%
}}

\newcommand{\ottdefnWFXXTypeXX}[1]{\begin{ottdefnblock}[#1]{$\Theta  \vdash  \ottnt{t} \, \textsf{Type}$}{\ottcom{Valid types}}
\ottusedrule{\ottdruleWFXXTypeXXUnit{}}
\ottusedrule{\ottdruleWFXXTypeXXInt{}}
\ottusedrule{\ottdruleWFXXTypeXXFloatSixFour{}}
\ottusedrule{\ottdruleWFXXTypeXXBool{}}
\ottusedrule{\ottdruleWFXXTypeXXPair{}}
\ottusedrule{\ottdruleWFXXTypeXXLollipop{}}
\ottusedrule{\ottdruleWFXXTypeXXFixt{}}
\ottusedrule{\ottdruleWFXXTypeXXArray{}}
\ottusedrule{\ottdruleWFXXTypeXXForAll{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsWellXXFormed}{
\ottdefnWFXXCapXX{}\ottdefnWFXXTypeXX{}}

% defns Types
%% defn Type
\newcommand{\ottdruleTyXXVar}[1]{\ottdrule[#1]{%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}   \cdot   \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{t}  \vdash  \mathit{x}  \ottsym{:}  \ottnt{t}}{%
{\ottdrulename{Ty\_Var}}{}%
}}


\newcommand{\ottdruleTyXXVarXXBang}[1]{\ottdrule[#1]{%
\ottpremise{\mathit{x}  \ottsym{:}  \ottnt{ti} \, \in \, \Delta}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \mathit{x}  \ottsym{:}  \: !  \ottsym{(}  \ottnt{ti}  \ottsym{)}}{%
{\ottdrulename{Ty\_Var\_Bang}}{}%
}}


\newcommand{\ottdruleTyXXIntXXIntro}[1]{\ottdrule[#1]{%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \mathit{k}  \ottsym{:}  \: !  \ottsym{(}  \ottkw{int}  \ottsym{)}}{%
{\ottdrulename{Ty\_Int\_Intro}}{}%
}}


\newcommand{\ottdruleTyXXFloatSixFourXXIntro}[1]{\ottdrule[#1]{%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \mathit{flt}  \ottsym{:}  \: !  \ottsym{(}  \ottnt{f_{{\mathrm{64}}}}  \ottsym{)}}{%
{\ottdrulename{Ty\_Float64\_Intro}}{}%
}}


\newcommand{\ottdruleTyXXUnitXXIntro}[1]{\ottdrule[#1]{%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}   \cdot   \vdash  \ottsym{(}  \ottsym{)}  \ottsym{:}  \ottsym{1}}{%
{\ottdrulename{Ty\_Unit\_Intro}}{}%
}}


\newcommand{\ottdruleTyXXUnitXXElim}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottsym{1}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma'  \vdash  \ottnt{e'}  \ottsym{:}  \ottnt{t}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \ottsym{,}  \Gamma'  \vdash  \ottkw{let} \, \ottsym{(}  \ottsym{)}  \ottsym{=}  \ottnt{e}  \ottsym{;}  \ottnt{e'}  \ottsym{:}  \ottnt{t}}{%
{\ottdrulename{Ty\_Unit\_Elim}}{}%
}}


\newcommand{\ottdruleTyXXBoolXXTrue}[1]{\ottdrule[#1]{%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottkw{true}  \ottsym{:}  \: !  \ottsym{(}  \ottkw{bool}  \ottsym{)}}{%
{\ottdrulename{Ty\_Bool\_True}}{}%
}}


\newcommand{\ottdruleTyXXBoolXXFalse}[1]{\ottdrule[#1]{%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottkw{false}  \ottsym{:}  \: !  \ottsym{(}  \ottkw{bool}  \ottsym{)}}{%
{\ottdrulename{Ty\_Bool\_False}}{}%
}}


\newcommand{\ottdruleTyXXBoolXXElim}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \: !  \ottsym{(}  \ottkw{bool}  \ottsym{)}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma_{{\mathrm{1}}}  \vdash  \ottnt{e_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{t}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma_{{\mathrm{2}}}  \vdash  \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{t}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \ottsym{,}  \Gamma_{{\mathrm{1}}}  \ottsym{,}  \Gamma_{{\mathrm{2}}}  \vdash  \ottkw{if} \, \ottnt{e} \, \ottkw{then} \, \ottnt{e_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{t}}{%
{\ottdrulename{Ty\_Bool\_Elim}}{}%
}}


\newcommand{\ottdruleTyXXPairXXIntro}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma'  \vdash  \ottnt{e'}  \ottsym{:}  \ottnt{t'}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \ottsym{,}  \Gamma'  \vdash  \ottsym{(}  \ottnt{e}  \ottsym{,}  \ottnt{e'}  \ottsym{)}  \ottsym{:}  \ottnt{t}  \otimes  \ottnt{t'}}{%
{\ottdrulename{Ty\_Pair\_Intro}}{}%
}}


\newcommand{\ottdruleTyXXPairXXElim}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e_{{\mathrm{12}}}}  \ottsym{:}  \ottnt{t_{{\mathrm{1}}}}  \otimes  \ottnt{t_{{\mathrm{2}}}}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma'  \ottsym{,}  \mathit{a}  \ottsym{:}  \ottnt{t_{{\mathrm{1}}}}  \ottsym{,}  \mathit{b}  \ottsym{:}  \ottnt{t_{{\mathrm{2}}}}  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \ottsym{,}  \Gamma'  \vdash  \ottkw{let} \, \ottsym{(}  \mathit{a}  \ottsym{,}  \mathit{b}  \ottsym{)}  \ottsym{=}  \ottnt{e_{{\mathrm{12}}}}  \ottsym{;}  \ottnt{e}  \ottsym{:}  \ottnt{t}}{%
{\ottdrulename{Ty\_Pair\_Elim}}{}%
}}


\newcommand{\ottdruleTyXXLambdaXXBang}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash  \: !  \ottsym{(}  \ottnt{ti}  \ottsym{)} \, \textsf{Type}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{ti}  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \lambda  \mathit{x}  \ottsym{:}  \: !  \ottsym{(}  \ottnt{ti}  \ottsym{)}  \ottsym{.}  \ottnt{e}  \ottsym{:}  \: !  \ottsym{(}  \ottnt{ti}  \ottsym{)}  \multimap  \ottnt{t}}{%
{\ottdrulename{Ty\_Lambda\_Bang}}{}%
}}


\newcommand{\ottdruleTyXXLambda}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash  \ottnt{t'} \, \textsf{Type}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{t'}  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \lambda  \mathit{x}  \ottsym{:}  \ottnt{t'}  \ottsym{.}  \ottnt{e}  \ottsym{:}  \ottnt{t'}  \multimap  \ottnt{t}}{%
{\ottdrulename{Ty\_Lambda}}{}%
}}


\newcommand{\ottdruleTyXXApp}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t'}  \multimap  \ottnt{t}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma'  \vdash  \ottnt{e'}  \ottsym{:}  \ottnt{t'}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \ottsym{,}  \Gamma'  \vdash  \ottnt{e} \, \ottnt{e'}  \ottsym{:}  \ottnt{t}}{%
{\ottdrulename{Ty\_App}}{}%
}}


\newcommand{\ottdruleTyXXArrayXXIntro}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \: !  \ottsym{(}  \ottkw{int}  \ottsym{)}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottkw{Array} \, \ottnt{e}  \ottsym{:}  \ottkw{Arr} \, \ottsym{[}  \ottkw{Zero}  \ottsym{]}}{%
{\ottdrulename{Ty\_Array\_Intro}}{}%
}}


\newcommand{\ottdruleTyXXArrayXXElim}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottkw{Arr} \, \ottsym{[}  \ottnt{f}  \ottsym{]}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma'  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottkw{Arr} \, \ottsym{[}  \ottnt{f}  \ottsym{]}  \vdash  \ottnt{e'}  \ottsym{:}  \ottnt{t'}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \ottsym{,}  \Gamma'  \vdash  \ottkw{let} \, \mathit{x}  \ottsym{=}  \ottnt{e}  \ottsym{;}  \ottnt{e'}  \ottsym{:}  \ottnt{t'}}{%
{\ottdrulename{Ty\_Array\_Elim}}{}%
}}


\newcommand{\ottdruleTyXXForAllXXfracXXcap}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{,}  \mathit{fc}  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \forall \, \mathit{fc}  \ottsym{.}  \ottnt{e}  \ottsym{:}  \forall \, \mathit{fc}  \ottsym{.}  \ottnt{t}}{%
{\ottdrulename{Ty\_ForAll\_frac\_cap}}{}%
}}


\newcommand{\ottdruleTyXXSpecXXfracXXcap}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash  \ottnt{f} \, \textsf{Cap}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \forall \, \mathit{fc}  \ottsym{.}  \ottnt{t}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{[}  \ottnt{f}  \ottsym{]}  \ottsym{:}  \ottnt{t}  \ottsym{\{}  \ottnt{f}  \ottsym{/}  \mathit{fc}  \ottsym{\}}}{%
{\ottdrulename{Ty\_Spec\_frac\_cap}}{}%
}}


\newcommand{\ottdruleTyXXFix}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash  \ottnt{t}  \multimap  \ottnt{t'} \, \textsf{Type}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{,}  \mathit{g}  \ottsym{:}  \ottnt{t_{{\mathrm{1}}}}  \multimap  \ottnt{t_{{\mathrm{2}}}}  \ottsym{;}   \cdot   \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t_{{\mathrm{1}}}}  \multimap  \ottnt{t_{{\mathrm{2}}}}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottkw{fix} \, \mathit{g}  \ottsym{:}  \: !  \ottsym{(}  \ottnt{t}  \multimap  \ottnt{t'}  \ottsym{)}  \ottsym{=}  \ottnt{e}  \ottsym{:}  \: !  \ottsym{(}  \ottnt{t}  \multimap  \ottnt{t'}  \ottsym{)}}{%
{\ottdrulename{Ty\_Fix}}{}%
}}

\newcommand{\ottdefnTyXXType}[1]{\begin{ottdefnblock}[#1]{$\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t}$}{\ottcom{Tying rules for expressions (no primitives yet)}}
\ottusedrule{\ottdruleTyXXVar{}}
\ottusedrule{\ottdruleTyXXVarXXBang{}}
\ottusedrule{\ottdruleTyXXIntXXIntro{}}
\ottusedrule{\ottdruleTyXXFloatSixFourXXIntro{}}
\ottusedrule{\ottdruleTyXXUnitXXIntro{}}
\ottusedrule{\ottdruleTyXXUnitXXElim{}}
\ottusedrule{\ottdruleTyXXBoolXXTrue{}}
\ottusedrule{\ottdruleTyXXBoolXXFalse{}}
\ottusedrule{\ottdruleTyXXBoolXXElim{}}
\ottusedrule{\ottdruleTyXXPairXXIntro{}}
\ottusedrule{\ottdruleTyXXPairXXElim{}}
\ottusedrule{\ottdruleTyXXLambdaXXBang{}}
\ottusedrule{\ottdruleTyXXLambda{}}
\ottusedrule{\ottdruleTyXXApp{}}
\ottusedrule{\ottdruleTyXXArrayXXIntro{}}
\ottusedrule{\ottdruleTyXXArrayXXElim{}}
\ottusedrule{\ottdruleTyXXForAllXXfracXXcap{}}
\ottusedrule{\ottdruleTyXXSpecXXfracXXcap{}}
\ottusedrule{\ottdruleTyXXFix{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsTypes}{
\ottdefnTyXXType{}}

\newcommand{\ottdefnss}{
\ottdefnsWellXXFormed
\ottdefnsTypes
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}

