% generated by Ott 0.25 from: semantics.ott
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \mathit{fc} $ & \ottcom{fractional capability variable} \\
 $ \mathit{x} ,\, \mathit{g} ,\, \mathit{a} ,\, \mathit{b} $ & \ottcom{expression variable} \\
 $ \mathit{k} $ & \ottcom{integer variable} \\
 $ \mathit{el} $ & \ottcom{array-element variable} \\
 $ \mathit{ \ell } $ & \ottcom{location variable} \\
}}

\newcommand{\ottf}{
\ottrulehead{\ottnt{f}}{::=}{\ottcom{fractional capability}}\ottprodnewline
\ottfirstprodline{|}{\mathit{fc}}{}{}{}{\ottcom{variable}}\ottprodnewline
\ottprodline{|}{\ottkw{Z}}{}{}{}{\ottcom{zero}}\ottprodnewline
\ottprodline{|}{\ottkw{S} \, \ottnt{f}}{}{}{}{\ottcom{successor}}}

\newcommand{\ottt}{
\ottrulehead{\ottnt{t}}{::=}{\ottcom{linear type}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{unit}}{}{}{}{\ottcom{unit}}\ottprodnewline
\ottprodline{|}{\ottkw{bool}}{}{}{}{\ottcom{boolean (true/false)}}\ottprodnewline
\ottprodline{|}{\ottkw{int}}{}{}{}{\ottcom{63-bit integers}}\ottprodnewline
\ottprodline{|}{\ottkw{elt}}{}{}{}{\ottcom{array element}}\ottprodnewline
\ottprodline{|}{\ottnt{f} \, \ottkw{arr}}{}{}{}{\ottcom{arrays}}\ottprodnewline
\ottprodline{|}{\ottnt{f} \, \ottkw{mat}}{}{}{}{\ottcom{matrices}}\ottprodnewline
\ottprodline{|}{\: !  \ottnt{t}}{}{}{}{\ottcom{multiple-use type}}\ottprodnewline
\ottprodline{|}{\forall \, \mathit{fc}  \ottsym{.}  \ottnt{t}}{}{\textsf{bind}\; \mathit{fc}\; \textsf{in}\; \ottnt{t}}{}{\ottcom{frac. cap. generalisation}}\ottprodnewline
\ottprodline{|}{\ottnt{t}  \otimes  \ottnt{t'}}{}{}{}{\ottcom{pair}}\ottprodnewline
\ottprodline{|}{\ottnt{t}  \multimap  \ottnt{t'}}{}{}{}{\ottcom{linear function}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{t}  \ottsym{)}} {\textsf{S}}{}{}{\ottcom{parentheses}}}

\newcommand{\ottv}{
\ottrulehead{\ottnt{v}}{::=}{\ottcom{values}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{p}}{}{}{}{\ottcom{primitives}}\ottprodnewline
\ottprodline{|}{\mathit{x}}{}{}{}{\ottcom{variable}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottsym{)}}{}{}{}{\ottcom{unit introduction}}\ottprodnewline
\ottprodline{|}{\ottkw{true}}{}{}{}{\ottcom{true}}\ottprodnewline
\ottprodline{|}{\ottkw{false}}{}{}{}{\ottcom{false}}\ottprodnewline
\ottprodline{|}{\mathit{k}}{}{}{}{\ottcom{integer}}\ottprodnewline
\ottprodline{|}{\mathit{ \ell }}{}{}{}{\ottcom{heap location}}\ottprodnewline
\ottprodline{|}{\mathit{el}}{}{}{}{\ottcom{array element}}\ottprodnewline
\ottprodline{|}{\ottkw{Many} \, \ottnt{v}}{}{}{}{\ottcom{!-introduction}}\ottprodnewline
\ottprodline{|}{\ottkw{fun} \, \mathit{fc}  \rightarrow  \ottnt{v}}{}{}{}{\ottcom{frac. cap. abstraction}}\ottprodnewline
\ottprodline{|}{\ottnt{v}  \ottsym{[}  \ottnt{f}  \ottsym{]}}{}{}{}{\ottcom{frac. cap. specialisation}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{v}  \ottsym{,}  \ottnt{v'}  \ottsym{)}}{}{}{}{\ottcom{pair introduction}}\ottprodnewline
\ottprodline{|}{\ottkw{fun} \, \mathit{x}  \ottsym{:}  \ottnt{t}  \rightarrow  \ottnt{e}}{}{\textsf{bind}\; \mathit{x}\; \textsf{in}\; \ottnt{e}}{}{\ottcom{abstraction}}\ottprodnewline
\ottprodline{|}{\ottkw{fix} \, \ottsym{(}  \mathit{g}  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{t}  \ottsym{,}  \ottnt{e}  \ottsym{:}  \ottnt{t'}  \ottsym{)}}{}{\textsf{bind}\; \mathit{g} \cup  \mathit{x}\; \textsf{in}\; \ottnt{e}}{}{\ottcom{fixpoint}}}

\newcommand{\otte}{
\ottrulehead{\ottnt{e}}{::=}{\ottcom{expression}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{p}}{}{}{}{\ottcom{primitives}}\ottprodnewline
\ottprodline{|}{\mathit{x}}{}{}{}{\ottcom{variable}}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, \mathit{x}  \ottsym{=}  \ottnt{e} \, \ottkw{in} \, \ottnt{e'}}{}{\textsf{bind}\; \mathit{x}\; \textsf{in}\; \ottnt{e'}}{}{\ottcom{let binding}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottsym{)}}{}{}{}{\ottcom{unit introduction}}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, \ottsym{(}  \ottsym{)}  \ottsym{=}  \ottnt{e} \, \ottkw{in} \, \ottnt{e'}}{}{}{}{\ottcom{unit elimination}}\ottprodnewline
\ottprodline{|}{\ottkw{true}}{}{}{}{\ottcom{true}}\ottprodnewline
\ottprodline{|}{\ottkw{false}}{}{}{}{\ottcom{false}}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, \ottnt{e} \, \ottkw{then} \, \ottnt{e_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{e_{{\mathrm{2}}}}}{}{}{}{\ottcom{if}}\ottprodnewline
\ottprodline{|}{\mathit{k}}{}{}{}{\ottcom{integer}}\ottprodnewline
\ottprodline{|}{\mathit{ \ell }}{}{}{}{\ottcom{heap location}}\ottprodnewline
\ottprodline{|}{\mathit{el}}{}{}{}{\ottcom{array element}}\ottprodnewline
\ottprodline{|}{\ottkw{Many} \, \ottnt{e}}{}{}{}{\ottcom{!-introduction}}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, \ottkw{Many} \, \mathit{x}  \ottsym{=}  \ottnt{e} \, \ottkw{in} \, \ottnt{e'}}{}{}{}{\ottcom{!-elimination}}\ottprodnewline
\ottprodline{|}{\ottkw{fun} \, \mathit{fc}  \rightarrow  \ottnt{e}}{}{}{}{\ottcom{frac. cap. abstraction}}\ottprodnewline
\ottprodline{|}{\ottnt{e}  \ottsym{[}  \ottnt{f}  \ottsym{]}}{}{}{}{\ottcom{frac. cap. specialisation}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{e}  \ottsym{,}  \ottnt{e'}  \ottsym{)}}{}{}{}{\ottcom{pair introduction}}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, \ottsym{(}  \mathit{a}  \ottsym{,}  \mathit{b}  \ottsym{)}  \ottsym{=}  \ottnt{e} \, \ottkw{in} \, \ottnt{e'}}{}{\textsf{bind}\; \mathit{a} \cup  \mathit{b}\; \textsf{in}\; \ottnt{e'}}{}{\ottcom{pair elimination}}\ottprodnewline
\ottprodline{|}{\ottkw{fun} \, \mathit{x}  \ottsym{:}  \ottnt{t}  \rightarrow  \ottnt{e}}{}{\textsf{bind}\; \mathit{x}\; \textsf{in}\; \ottnt{e}}{}{\ottcom{abstraction}}\ottprodnewline
\ottprodline{|}{\ottnt{e} \, \ottnt{e'}}{}{}{}{\ottcom{application}}\ottprodnewline
\ottprodline{|}{\ottkw{fix} \, \ottsym{(}  \mathit{g}  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{t}  \ottsym{,}  \ottnt{e}  \ottsym{:}  \ottnt{t'}  \ottsym{)}}{}{\textsf{bind}\; \mathit{g} \cup  \mathit{x}\; \textsf{in}\; \ottnt{e}}{}{\ottcom{fixpoint}}}

\newcommand{\ottC}{
\ottrulehead{\ottnt{C}}{::=}{\ottcom{evaluation contexts}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{let} \, \mathit{x}  \ottsym{=}  [ - ] \, \ottkw{in} \, \ottnt{e}}{}{\textsf{bind}\; \mathit{x}\; \textsf{in}\; \ottnt{e}}{}{\ottcom{let binding}}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, \ottsym{(}  \ottsym{)}  \ottsym{=}  [ - ] \, \ottkw{in} \, \ottnt{e}}{}{}{}{\ottcom{unit elimination}}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, [ - ] \, \ottkw{then} \, \ottnt{e_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{e_{{\mathrm{2}}}}}{}{}{}{\ottcom{if}}\ottprodnewline
\ottprodline{|}{\ottkw{Many} \, [ - ]}{}{}{}{\ottcom{!-introduction}}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, \ottkw{Many} \, \mathit{x}  \ottsym{=}  [ - ] \, \ottkw{in} \, \ottnt{e}}{}{}{}{\ottcom{!-elimination}}\ottprodnewline
\ottprodline{|}{\ottkw{fun} \, \mathit{fc}  \rightarrow  [ - ]}{}{}{}{\ottcom{frac. cap. abstraction}}\ottprodnewline
\ottprodline{|}{[ - ]  \ottsym{[}  \ottnt{f}  \ottsym{]}}{}{}{}{\ottcom{frac. cap. specialisation}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  [ - ]  \ottsym{,}  \ottnt{e}  \ottsym{)}}{}{}{}{\ottcom{pair introduction}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{v}  \ottsym{,}  [ - ]  \ottsym{)}}{}{}{}{\ottcom{pair introduction}}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, \ottsym{(}  \mathit{a}  \ottsym{,}  \mathit{b}  \ottsym{)}  \ottsym{=}  [ - ] \, \ottkw{in} \, \ottnt{e}}{}{\textsf{bind}\; \mathit{a} \cup  \mathit{b}\; \textsf{in}\; \ottnt{e}}{}{\ottcom{pair elimination}}\ottprodnewline
\ottprodline{|}{[ - ]  \ottnt{e}}{}{}{}{\ottcom{application}}\ottprodnewline
\ottprodline{|}{\ottnt{v}  [ - ]}{}{}{}{\ottcom{application}}}

\newcommand{\ottp}{
\ottrulehead{\ottnt{p}}{::=}{\ottcom{primitive}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{not}}{}{}{}{\ottcom{boolean negation}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottsym{+}  \ottsym{)}}{}{}{}{\ottcom{integer addition}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottsym{-}  \ottsym{)}}{}{}{}{\ottcom{integer subtraction}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottsym{*}  \ottsym{)}}{}{}{}{\ottcom{integer multiplication}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottsym{/}  \ottsym{)}}{}{}{}{\ottcom{integer division}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottsym{=}  \ottsym{)}}{}{}{}{\ottcom{integer equality}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottsym{<}  \ottsym{)}}{}{}{}{\ottcom{integer less-than}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottsym{+.}  \ottsym{)}}{}{}{}{\ottcom{element addition}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottsym{-.}  \ottsym{)}}{}{}{}{\ottcom{element subtraction}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottsym{*.}  \ottsym{)}}{}{}{}{\ottcom{element multiplication}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottsym{/.}  \ottsym{)}}{}{}{}{\ottcom{element division}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottsym{=.}  \ottsym{)}}{}{}{}{\ottcom{element equality}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottsym{<.}  \ottsym{)}}{}{}{}{\ottcom{element less-than}}\ottprodnewline
\ottprodline{|}{\ottkw{set}}{}{}{}{\ottcom{array index assignment}}\ottprodnewline
\ottprodline{|}{\ottkw{get}}{}{}{}{\ottcom{array indexing}}\ottprodnewline
\ottprodline{|}{\ottkw{share}}{}{}{}{\ottcom{share array}}\ottprodnewline
\ottprodline{|}{\ottkw{unshare}}{}{}{}{\ottcom{unshare array}}\ottprodnewline
\ottprodline{|}{\ottkw{free}}{}{}{}{\ottcom{free arrary}}\ottprodnewline
\ottprodline{|}{\ottkw{array}}{}{}{}{\ottcom{Owl:  make array}}\ottprodnewline
\ottprodline{|}{\ottkw{copy}}{}{}{}{\ottcom{Owl:  copy array}}\ottprodnewline
\ottprodline{|}{\ottkw{sin}}{}{}{}{\ottcom{Owl:  map sine over array}}\ottprodnewline
\ottprodline{|}{\ottkw{hypot}}{}{}{}{\ottcom{Owl:  $x_i := \sqrt{x_i^2 + y_i^2}$}}\ottprodnewline
\ottprodline{|}{\ottkw{asum}}{}{}{}{\ottcom{BLAS: $\sum_i | x_i |$}}\ottprodnewline
\ottprodline{|}{\ottkw{axpy}}{}{}{}{\ottcom{BLAS: $x := \alpha x + y$}}\ottprodnewline
\ottprodline{|}{\ottkw{dot}}{}{}{}{\ottcom{BLAS: $x \cdot y$}}\ottprodnewline
\ottprodline{|}{\ottkw{rotmg}}{}{}{}{\ottcom{BLAS: see its docs}}\ottprodnewline
\ottprodline{|}{\ottkw{scal}}{}{}{}{\ottcom{BLAS: $x := \alpha x$}}\ottprodnewline
\ottprodline{|}{\ottkw{amax}}{}{}{}{\ottcom{BLAS: $\textrm{argmax}\,i:\,x_i$}}\ottprodnewline
\ottprodline{|}{\ottkw{setM}}{}{}{}{\ottcom{matrix index assignment}}\ottprodnewline
\ottprodline{|}{\ottkw{getM}}{}{}{}{\ottcom{matrix indexing}}\ottprodnewline
\ottprodline{|}{\ottkw{shareM}}{}{}{}{\ottcom{share matrix}}\ottprodnewline
\ottprodline{|}{\ottkw{unshareM}}{}{}{}{\ottcom{unshare matrix}}\ottprodnewline
\ottprodline{|}{\ottkw{freeM}}{}{}{}{\ottcom{free matrix}}\ottprodnewline
\ottprodline{|}{\ottkw{matrix}}{}{}{}{\ottcom{Owl:  make matrix}}\ottprodnewline
\ottprodline{|}{\ottkw{copyM}}{}{}{}{\ottcom{Owl:  copy matrix}}\ottprodnewline
\ottprodline{|}{ \textbf{copyM\_to} }{}{}{}{\ottcom{Owl:  copy matrix onto another}}\ottprodnewline
\ottprodline{|}{\ottkw{sizeM}}{}{}{}{\ottcom{dimension of matrix}}\ottprodnewline
\ottprodline{|}{\ottkw{trnsp}}{}{}{}{\ottcom{transpose matrix}}\ottprodnewline
\ottprodline{|}{\ottkw{gemm}}{}{}{}{\ottcom{BLAS: $C := \alpha A^{T?} B^{T?} + \beta C$}}\ottprodnewline
\ottprodline{|}{\ottkw{symm}}{}{}{}{\ottcom{BLAS: $C := \alpha A B + \beta C$}}\ottprodnewline
\ottprodline{|}{\ottkw{posv}}{}{}{}{\ottcom{BLAS: Cholesky decomp. and solve}}\ottprodnewline
\ottprodline{|}{\ottkw{potrs}}{}{}{}{\ottcom{BLAS: solve with given Cholesky}}}

\newcommand{\ottT}{
\ottrulehead{\Theta}{::=}{\ottcom{fractional capability environment}}\ottprodnewline
\ottfirstprodline{|}{ \cdot }{}{}{}{}\ottprodnewline
\ottprodline{|}{\Theta  \ottsym{,}  \mathit{fc}}{}{}{}{}}

\newcommand{\ottG}{
\ottrulehead{\Gamma}{::=}{\ottcom{linear types environment}}\ottprodnewline
\ottfirstprodline{|}{ \cdot }{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{t}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{,}  \Gamma'}{}{}{}{}}

\newcommand{\ottD}{
\ottrulehead{\Delta}{::=}{\ottcom{linear types environment}}\ottprodnewline
\ottfirstprodline{|}{ \cdot }{}{}{}{}\ottprodnewline
\ottprodline{|}{\Delta  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{t}}{}{}{}{}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\ottf\ottinterrule
\ottt\ottinterrule
\ottv\ottinterrule
\otte\ottinterrule
\ottC\ottinterrule
\ottp\ottinterrule
\ottT\ottinterrule
\ottG\ottinterrule
\ottD\ottafterlastrule
}}

% defnss
% defns Well_Formed
%% defn Cap_
\newcommand{\ottdruleWFXXCapXXVar}[1]{\ottdrule[#1]{%
\ottpremise{\mathit{fc} \, \in \, \Theta}%
}{
\Theta  \vdash  \mathit{fc} \, \textsf{Cap}}{%
{\ottdrulename{WF\_Cap\_Var}}{}%
}}


\newcommand{\ottdruleWFXXCapXXZero}[1]{\ottdrule[#1]{%
}{
\Theta  \vdash  \ottkw{Z} \, \textsf{Cap}}{%
{\ottdrulename{WF\_Cap\_Zero}}{}%
}}


\newcommand{\ottdruleWFXXCapXXSucc}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash  \ottnt{f} \, \textsf{Cap}}%
}{
\Theta  \vdash  \ottkw{S} \, \ottnt{f} \, \textsf{Cap}}{%
{\ottdrulename{WF\_Cap\_Succ}}{}%
}}

\newcommand{\ottdefnWFXXCapXX}[1]{\begin{ottdefnblock}[#1]{$\Theta  \vdash  \ottnt{f} \, \textsf{Cap}$}{\ottcom{Valid fractional capabilities}}
\ottusedrule{\ottdruleWFXXCapXXVar{}}
\ottusedrule{\ottdruleWFXXCapXXZero{}}
\ottusedrule{\ottdruleWFXXCapXXSucc{}}
\end{ottdefnblock}}

%% defn Type_
\newcommand{\ottdruleWFXXTypeXXUnit}[1]{\ottdrule[#1]{%
}{
\Theta  \vdash  \ottkw{unit} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Unit}}{}%
}}


\newcommand{\ottdruleWFXXTypeXXBool}[1]{\ottdrule[#1]{%
}{
\Theta  \vdash  \ottkw{bool} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Bool}}{}%
}}


\newcommand{\ottdruleWFXXTypeXXInt}[1]{\ottdrule[#1]{%
}{
\Theta  \vdash  \ottkw{int} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Int}}{}%
}}


\newcommand{\ottdruleWFXXTypeXXElt}[1]{\ottdrule[#1]{%
}{
\Theta  \vdash  \ottkw{elt} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Elt}}{}%
}}


\newcommand{\ottdruleWFXXTypeXXArray}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash  \ottnt{f} \, \textsf{Cap}}%
}{
\Theta  \vdash  \ottnt{f} \, \ottkw{arr} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Array}}{}%
}}


\newcommand{\ottdruleWFXXTypeXXBang}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash  \ottnt{t} \, \textsf{Type}}%
}{
\Theta  \vdash  \: !  \ottnt{t} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Bang}}{}%
}}


\newcommand{\ottdruleWFXXTypeXXGen}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{,}  \mathit{fc}  \vdash  \ottnt{t} \, \textsf{Type}}%
}{
\Theta  \vdash  \forall \, \mathit{fc}  \ottsym{.}  \ottnt{t} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Gen}}{}%
}}


\newcommand{\ottdruleWFXXTypeXXPair}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash  \ottnt{t} \, \textsf{Type}}%
\ottpremise{\Theta  \vdash  \ottnt{t'} \, \textsf{Type}}%
}{
\Theta  \vdash  \ottnt{t}  \otimes  \ottnt{t'} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Pair}}{}%
}}


\newcommand{\ottdruleWFXXTypeXXLolly}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash  \ottnt{t} \, \textsf{Type}}%
\ottpremise{\Theta  \vdash  \ottnt{t'} \, \textsf{Type}}%
}{
\Theta  \vdash  \ottnt{t}  \multimap  \ottnt{t'} \, \textsf{Type}}{%
{\ottdrulename{WF\_Type\_Lolly}}{}%
}}

\newcommand{\ottdefnWFXXTypeXX}[1]{\begin{ottdefnblock}[#1]{$\Theta  \vdash  \ottnt{t} \, \textsf{Type}$}{\ottcom{Valid types}}
\ottusedrule{\ottdruleWFXXTypeXXUnit{}}
\ottusedrule{\ottdruleWFXXTypeXXBool{}}
\ottusedrule{\ottdruleWFXXTypeXXInt{}}
\ottusedrule{\ottdruleWFXXTypeXXElt{}}
\ottusedrule{\ottdruleWFXXTypeXXArray{}}
\ottusedrule{\ottdruleWFXXTypeXXBang{}}
\ottusedrule{\ottdruleWFXXTypeXXGen{}}
\ottusedrule{\ottdruleWFXXTypeXXPair{}}
\ottusedrule{\ottdruleWFXXTypeXXLolly{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsWellXXFormed}{
\ottdefnWFXXCapXX{}\ottdefnWFXXTypeXX{}}

% defns Types
%% defn Type_
\newcommand{\ottdruleTyXXVarXXLin}[1]{\ottdrule[#1]{%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}   \cdot   \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{t}  \vdash  \mathit{x}  \ottsym{:}  \ottnt{t}}{%
{\ottdrulename{Ty\_Var\_Lin}}{}%
}}


\newcommand{\ottdruleTyXXVar}[1]{\ottdrule[#1]{%
\ottpremise{\mathit{x}  \ottsym{:}  \ottnt{t} \, \in \, \Delta}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}   \cdot   \vdash  \mathit{x}  \ottsym{:}  \ottnt{t}}{%
{\ottdrulename{Ty\_Var}}{}%
}}


\newcommand{\ottdruleTyXXLet}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma'  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{t}  \vdash  \ottnt{e'}  \ottsym{:}  \ottnt{t'}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \ottsym{,}  \Gamma'  \vdash  \ottkw{let} \, \mathit{x}  \ottsym{=}  \ottnt{e} \, \ottkw{in} \, \ottnt{e'}  \ottsym{:}  \ottnt{t'}}{%
{\ottdrulename{Ty\_Let}}{}%
}}


\newcommand{\ottdruleTyXXUnitXXIntro}[1]{\ottdrule[#1]{%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}   \cdot   \vdash  \ottsym{(}  \ottsym{)}  \ottsym{:}  \ottkw{unit}}{%
{\ottdrulename{Ty\_Unit\_Intro}}{}%
}}


\newcommand{\ottdruleTyXXUnitXXElim}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}   \cdot   \vdash  \ottnt{e}  \ottsym{:}  \ottkw{unit}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e'}  \ottsym{:}  \ottnt{t}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottkw{let} \, \ottsym{(}  \ottsym{)}  \ottsym{=}  \ottnt{e} \, \ottkw{in} \, \ottnt{e'}  \ottsym{:}  \ottnt{t}}{%
{\ottdrulename{Ty\_Unit\_Elim}}{}%
}}


\newcommand{\ottdruleTyXXBoolXXTrue}[1]{\ottdrule[#1]{%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}   \cdot   \vdash  \ottkw{true}  \ottsym{:}  \: !  \ottkw{bool}}{%
{\ottdrulename{Ty\_Bool\_True}}{}%
}}


\newcommand{\ottdruleTyXXBoolXXFalse}[1]{\ottdrule[#1]{%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}   \cdot   \vdash  \ottkw{false}  \ottsym{:}  \: !  \ottkw{bool}}{%
{\ottdrulename{Ty\_Bool\_False}}{}%
}}


\newcommand{\ottdruleTyXXBoolXXElim}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottkw{bool}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma'  \vdash  \ottnt{e_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{t'}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma'  \vdash  \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{t'}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \ottsym{,}  \Gamma'  \vdash  \ottkw{if} \, \ottnt{e} \, \ottkw{then} \, \ottnt{e_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{t}}{%
{\ottdrulename{Ty\_Bool\_Elim}}{}%
}}


\newcommand{\ottdruleTyXXIntXXIntro}[1]{\ottdrule[#1]{%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}   \cdot   \vdash  \mathit{k}  \ottsym{:}  \: !  \ottkw{int}}{%
{\ottdrulename{Ty\_Int\_Intro}}{}%
}}


\newcommand{\ottdruleTyXXEltXXIntro}[1]{\ottdrule[#1]{%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}   \cdot   \vdash  \mathit{el}  \ottsym{:}  \: !  \ottkw{elt}}{%
{\ottdrulename{Ty\_Elt\_Intro}}{}%
}}


\newcommand{\ottdruleTyXXBangXXIntro}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}   \cdot   \vdash  \ottnt{v}  \ottsym{:}  \ottnt{t}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}   \cdot   \vdash  \ottkw{Many} \, \ottnt{v}  \ottsym{:}  \: !  \ottnt{t}}{%
{\ottdrulename{Ty\_Bang\_Intro}}{}%
}}


\newcommand{\ottdruleTyXXBangXXElim}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \: !  \ottnt{t}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{t}  \ottsym{;}  \Gamma'  \vdash  \ottnt{e'}  \ottsym{:}  \ottnt{t'}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \ottsym{,}  \Gamma'  \vdash  \ottkw{let} \, \ottkw{Many} \, \mathit{x}  \ottsym{=}  \ottnt{e} \, \ottkw{in} \, \ottnt{e'}  \ottsym{:}  \ottnt{t'}}{%
{\ottdrulename{Ty\_Bang\_Elim}}{}%
}}


\newcommand{\ottdruleTyXXPairXXIntro}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma'  \vdash  \ottnt{e'}  \ottsym{:}  \ottnt{t'}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \ottsym{,}  \Gamma'  \vdash  \ottsym{(}  \ottnt{e}  \ottsym{,}  \ottnt{e'}  \ottsym{)}  \ottsym{:}  \ottnt{t}  \otimes  \ottnt{t'}}{%
{\ottdrulename{Ty\_Pair\_Intro}}{}%
}}


\newcommand{\ottdruleTyXXPairXXElim}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e_{{\mathrm{12}}}}  \ottsym{:}  \ottnt{t_{{\mathrm{1}}}}  \otimes  \ottnt{t_{{\mathrm{2}}}}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma'  \ottsym{,}  \mathit{a}  \ottsym{:}  \ottnt{t_{{\mathrm{1}}}}  \ottsym{,}  \mathit{b}  \ottsym{:}  \ottnt{t_{{\mathrm{2}}}}  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \ottsym{,}  \Gamma'  \vdash  \ottkw{let} \, \ottsym{(}  \mathit{a}  \ottsym{,}  \mathit{b}  \ottsym{)}  \ottsym{=}  \ottnt{e_{{\mathrm{12}}}} \, \ottkw{in} \, \ottnt{e}  \ottsym{:}  \ottnt{t}}{%
{\ottdrulename{Ty\_Pair\_Elim}}{}%
}}


\newcommand{\ottdruleTyXXLambda}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash  \ottnt{t'} \, \textsf{Type}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{t'}  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottkw{fun} \, \mathit{x}  \ottsym{:}  \ottnt{t'}  \rightarrow  \ottnt{e}  \ottsym{:}  \ottnt{t'}  \multimap  \ottnt{t}}{%
{\ottdrulename{Ty\_Lambda}}{}%
}}


\newcommand{\ottdruleTyXXApp}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t'}  \multimap  \ottnt{t}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma'  \vdash  \ottnt{e'}  \ottsym{:}  \ottnt{t'}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \ottsym{,}  \Gamma'  \vdash  \ottnt{e} \, \ottnt{e'}  \ottsym{:}  \ottnt{t}}{%
{\ottdrulename{Ty\_App}}{}%
}}


\newcommand{\ottdruleTyXXGen}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{,}  \mathit{fc}  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottkw{fun} \, \mathit{fc}  \rightarrow  \ottnt{e}  \ottsym{:}  \forall \, \mathit{fc}  \ottsym{.}  \ottnt{t}}{%
{\ottdrulename{Ty\_Gen}}{}%
}}


\newcommand{\ottdruleTyXXSpc}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \vdash  \ottnt{f} \, \textsf{Cap}}%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \forall \, \mathit{fc}  \ottsym{.}  \ottnt{t}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{[}  \ottnt{f}  \ottsym{]}  \ottsym{:}  \ottnt{t}  \ottsym{\{}  \ottnt{f}  \ottsym{/}  \mathit{fc}  \ottsym{\}}}{%
{\ottdrulename{Ty\_Spc}}{}%
}}


\newcommand{\ottdruleTyXXFix}[1]{\ottdrule[#1]{%
\ottpremise{\Theta  \ottsym{;}  \Delta  \ottsym{,}  \mathit{g}  \ottsym{:}  \ottnt{t}  \multimap  \ottnt{t'}  \ottsym{;}   \cdot   \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{t}  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t'}}%
}{
\Theta  \ottsym{;}  \Delta  \ottsym{;}   \cdot   \vdash  \ottkw{fix} \, \ottsym{(}  \mathit{g}  \ottsym{,}  \mathit{x}  \ottsym{:}  \ottnt{t}  \ottsym{,}  \ottnt{e}  \ottsym{:}  \ottnt{t'}  \ottsym{)}  \ottsym{:}  \: !  \ottsym{(}  \ottnt{t}  \multimap  \ottnt{t'}  \ottsym{)}}{%
{\ottdrulename{Ty\_Fix}}{}%
}}

\newcommand{\ottdefnTyXXTypeXX}[1]{\begin{ottdefnblock}[#1]{$\Theta  \ottsym{;}  \Delta  \ottsym{;}  \Gamma  \vdash  \ottnt{e}  \ottsym{:}  \ottnt{t}$}{\ottcom{Typing rules for expressions}}
\ottusedrule{\ottdruleTyXXVarXXLin{}}
\ottusedrule{\ottdruleTyXXVar{}}
\ottusedrule{\ottdruleTyXXLet{}}
\ottusedrule{\ottdruleTyXXUnitXXIntro{}}
\ottusedrule{\ottdruleTyXXUnitXXElim{}}
\ottusedrule{\ottdruleTyXXBoolXXTrue{}}
\ottusedrule{\ottdruleTyXXBoolXXFalse{}}
\ottusedrule{\ottdruleTyXXBoolXXElim{}}
\ottusedrule{\ottdruleTyXXIntXXIntro{}}
\ottusedrule{\ottdruleTyXXEltXXIntro{}}
\ottusedrule{\ottdruleTyXXBangXXIntro{}}
\ottusedrule{\ottdruleTyXXBangXXElim{}}
\ottusedrule{\ottdruleTyXXPairXXIntro{}}
\ottusedrule{\ottdruleTyXXPairXXElim{}}
\ottusedrule{\ottdruleTyXXLambda{}}
\ottusedrule{\ottdruleTyXXApp{}}
\ottusedrule{\ottdruleTyXXGen{}}
\ottusedrule{\ottdruleTyXXSpc{}}
\ottusedrule{\ottdruleTyXXFix{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsTypes}{
\ottdefnTyXXTypeXX{}}

\newcommand{\ottdefnss}{
\ottdefnsWellXXFormed
\ottdefnsTypes
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}

